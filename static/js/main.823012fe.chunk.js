(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(7),r=n.n(o),s=(n(15),n(10)),i=n(2),u=n(0);var l=function(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("div",{className:"header__logo"})})},p=n(6),d=n.p+"static/media/edit-botton.f0dd9c51.svg",m=n.p+"static/media/add-botton.bed8c136.svg",j=n.p+"static/media/line.90aa511c.gif",f=c.a.createContext(),h={name:"",about:"",avatar:j};var b=function(e){var t=e.onCardClick,n=e.link,a=e.name,o=e.likes,r=e.onCardLike,s=e._id,i=e.onCardDelete,l=e.owner,p=c.a.useContext(f),d=l._id===p._id,m="".concat(d?"element__btn_delete-active opacity-link":"element__btn opacity-link"),j=o.some((function(e){return e._id===p._id})),h="".concat(j?"element__likes_active element__likes_like-btn":"element__likes element__likes_like-btn");return Object(u.jsx)("div",{className:"elements__box",children:Object(u.jsxs)("div",{className:"element",children:[Object(u.jsx)("img",{className:"element__image",src:n,onClick:function(){t({img:n,title:a})},alt:a}),Object(u.jsx)("div",{className:"element__btn_delete",children:Object(u.jsx)("button",{className:m,type:"button",onClick:function(){i(s)},children:Object(u.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC4SURBVHgBrZQNEcIwDEa/cAhAwiQgAQlIwAGWkDAHVMIkxMGGgpJw7dH1st013btbL2uTt6z7ATaIMd7lmOOa21b+ORUNxpoWXaq5p+RynUhETLLwTkU9BBXNxpVb+XU0SPBAHyPpKLIr/F0tskcTkugV/YzqOGUr/HApYvhZStFhHR0mmuBndWs9sA6Uz/Q5woG8Q1R3xGiHc1CKPBvOlojRQSn6oB22RAHthBxQObv3KzX4f/XCF51ui58EdOBbAAAAAElFTkSuQmCC",width:"18",height:"17",alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})}),Object(u.jsxs)("div",{className:"element__info",children:[Object(u.jsx)("h3",{className:"element__title",children:a}),Object(u.jsxs)("div",{className:"element__likes",children:[Object(u.jsx)("button",{type:"button",className:h,onClick:function(){r(o,s)}}),Object(u.jsx)("p",{className:"element__likes element__likes_like-count",children:o.length})]})]})]})})};var _=function(e){var t=e.onEditAvatar,n=e.onAddPlace,a=e.onEditProfile,o=e.onCardClick,r=e.cards,s=e.onCardLike,i=e.onCardDelete,l=c.a.useContext(f);return Object(u.jsxs)("main",{className:"content",children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsx)("button",{className:"profile__botton",type:"button",onClick:t,children:Object(u.jsx)("img",{className:"profile__avatar opacity-link opacity-link_avatar",src:l.avatar,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430"})}),Object(u.jsxs)("div",{className:"profile__profile-info",children:[Object(u.jsxs)("div",{className:"profile__edit-name",children:[Object(u.jsx)("h1",{className:"profile__name",children:l.name}),Object(u.jsx)("button",{type:"button",className:"profile__edit-botton opacity-link",onClick:a,children:Object(u.jsx)("img",{src:d,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),Object(u.jsx)("h2",{className:"profile__profession",children:l.about})]}),Object(u.jsx)("button",{type:"button",className:"profile__add-botton opacity-link",onClick:n,children:Object(u.jsx)("img",{src:m,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"})})]}),Object(u.jsx)("section",{className:"elements",children:r.map((function(e){return Object(u.jsx)(b,Object(p.a)(Object(p.a)({onCardClick:o},e),{},{onCardLike:s,onCardDelete:i}),e._id)}))})]})},O=(document.querySelector(".popup__close_image"),document.querySelector(".popup__image"),document.querySelector("#popupTitle"),(new Date).getFullYear());document.querySelector("#saveAutor"),document.querySelector("#saveCard"),document.querySelector("#saveAvatar"),document.querySelector("#formCards"),document.querySelector(".popup__close"),document.querySelector("form"),document.querySelector(".popup__close"),document.querySelector(".popup_is-opened"),document.querySelectorAll(".popup__submit"),document.querySelector(".profile__avatar"),document.querySelector("#firstName"),document.querySelector("#lastName"),document.querySelector(".popup__container"),document.querySelector("#formAutor"),document.querySelector("#formCards"),document.querySelector("#formAvatar"),document.querySelector("#formDel"),document.querySelector(".profile__edit-botton"),document.querySelector(".profile__add-botton"),document.querySelector("#save"),document.querySelector(".element__btn");var v=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",O," Mesto Russia"]})})},x=n.p+"static/media/Close-Icon.628241e5.svg",k=function(e){var t=e.name,n=e.title,a=e.children,c=e.isOpen,o=e.onClose,r=e.onSubmit;return Object(u.jsx)("div",{className:"popup".concat(c?" popup_is-opened":""),name:t,children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{type:"button",className:"popup__close opacity-link",children:Object(u.jsx)("img",{src:x,onClick:o,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f"})}),Object(u.jsxs)("form",{className:"popup__title popup__title_not_margin",noValidate:!0,children:[Object(u.jsx)("h2",{className:"popup__title",children:n}),a,Object(u.jsx)("button",{onClick:r,type:"submit",className:"popup__submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})};var A=function(e){return Object(u.jsx)("div",{className:"popup".concat(e.isOpen?" popup_is-opened":""),id:e.name,children:Object(u.jsxs)("div",{className:"popup__image-container",children:[Object(u.jsx)("button",{type:"button",className:"popup__close opacity-link",children:Object(u.jsx)("img",{src:x,onClick:e.onClose,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f"})}),Object(u.jsx)("img",{className:"popup__image",src:e.card.img,alt:e.card.title}),Object(u.jsx)("h2",{className:"popup__title",id:"popupTitle",children:e.card.title})]})})},C=n(8),g=n(9),y=new(function(){function e(t){var n=t.url,a=t.token;Object(C.a)(this,e),this.url=n,this.token=a}return Object(g.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.url,"users/me"),{headers:this.token}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getCards",value:function(){return fetch("".concat(this.url,"cards"),{headers:this.token}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"changeLikeCardStatus",value:function(e,t){return!0===t?fetch("".concat(this.url,"cards/likes/").concat(e),{method:"PUT",headers:this.token}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})):fetch("".concat(this.url,"cards/likes/").concat(e),{method:"DELETE",headers:this.token}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this.url,"users/me"),{method:"PATCH",headers:this.token,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this.url,"users/me/avatar"),{method:"PATCH",headers:this.token,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"delmyCard",value:function(e){return fetch("".concat(this.url,"cards/").concat(e),{method:"DELETE",headers:this.token}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"setAddPlase",value:function(e){return fetch("".concat(this.url,"cards/"),{method:"POST",headers:this.token,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-24/",token:{authorization:"b94e78d1-b2d6-4481-aa74-fc7e4dc8c239","Content-Type":"application/json"}});var N=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=c.a.useContext(f),r=c.a.useState(o.name),s=Object(i.a)(r,2),l=s[0],p=s[1],d=c.a.useState(o.about),m=Object(i.a)(d,2),j=m[0],h=m[1];return c.a.useEffect((function(){p(o.name),h(o.about)}),[o]),Object(u.jsxs)(k,{onClose:n,isOpen:t,setName:p,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"popupAutor",onSubmit:function(e){e.preventDefault(),a({name:l,about:j})},children:[Object(u.jsx)("input",{value:l,onChange:function(e){e.preventDefault(),p(e.target.value)},name:"firstName",id:"firstName",type:"text",className:"popup__input",minLength:"2",maxLength:"40",required:!0,placeholder:"\u0418\u043c\u044f"}),Object(u.jsx)("span",{id:"firstName-error",className:"popup__error"}),Object(u.jsx)("input",{value:j,onChange:function(e){e.preventDefault(),h(e.target.value)},name:"lastName",id:"lastName",type:"text",className:"popup__input",minLength:"2",maxLength:"200",required:!0,placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f"}),Object(u.jsx)("span",{id:"lastName-error",className:"popup__error"})]})};var S=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,o=c.a.useRef();return c.a.useEffect((function(){!0===t&&(o.current.value="")}),[t]),Object(u.jsxs)(k,{onClose:n,isOpen:t,onSubmit:function(e){e.preventDefault(),a({avatar:o.current.value})},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"popupAvatar",children:[Object(u.jsx)("input",{ref:o,name:"link",id:"AvatarLink",type:"url",className:"popup__input",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(u.jsx)("span",{id:"AvatarLink-error",className:"popup__error"})]})};var q=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateCard,o=c.a.useState(""),r=Object(i.a)(o,2),s=r[0],l=r[1],p=c.a.useState(""),d=Object(i.a)(p,2),m=d[0],j=d[1];return c.a.useEffect((function(){!0===t&&(l(""),j(""))}),[t]),Object(u.jsxs)(k,{onClose:n,isOpen:t,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"popupCard",onSubmit:function(e){e.preventDefault(),a({name:m,link:s})},children:[Object(u.jsx)("input",{value:m,onChange:function(e){j(e.target.value)},type:"text",className:"popup__input",minLength:"2",maxLength:"30",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"inputTitle"}),Object(u.jsx)("span",{id:"inputTitle-error",className:"popup__error"}),Object(u.jsx)("input",{value:s,onChange:function(e){l(e.target.value)},id:"inputLink",type:"url",className:"popup__input",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(u.jsx)("span",{id:"inputLink-error",className:"popup__error"})]})};var U=function(){var e=c.a.useState(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],o=c.a.useState(!1),r=Object(i.a)(o,2),p=r[0],d=r[1],m=c.a.useState(!1),j=Object(i.a)(m,2),b=j[0],O=j[1],x=c.a.useState(!1),C=Object(i.a)(x,2),g=C[0],U=C[1],L=c.a.useState({img:null,title:null}),P=Object(i.a)(L,2),E=P[0],T=P[1],w=c.a.useState(h),B=Object(i.a)(w,2),D=B[0],I=B[1],R=c.a.useState([]),Q=Object(i.a)(R,2),H=Q[0],F=Q[1];c.a.useEffect((function(){y.getUserInfo().then((function(e){I(e)})).catch((function(e){return alert(e)})),y.getCards().then((function(e){F(e)})).catch((function(e){return alert(e)}))}),[]);var X=function(){O(!1),a(!1),d(!1),U(!1),T({img:null,title:null})};return Object(u.jsx)("div",{className:"page",children:Object(u.jsxs)(f.Provider,{value:D,children:[Object(u.jsx)(l,{}),Object(u.jsx)(_,{onEditProfile:function(){a(!0)},onAddPlace:function(){d(!0)},onEditAvatar:function(){O(!0)},onCardClick:function(e){T({img:e.img,title:e.title}),U(!0)},cards:H,onCardLike:function(e,t){var n=e.some((function(e){return e._id===D._id}));y.changeLikeCardStatus(t,!n).then((function(e){F((function(n){return n.map((function(n){return n._id===t?e:n}))}))})).catch((function(e){return alert(e)}))},onCardDelete:function(e){y.delmyCard(e).then((function(){F((function(t){return t.map((function(e){return e})).filter((function(t){return t._id!==e}))}))})).catch((function(e){return alert(e)}))}}),Object(u.jsx)(v,{}),Object(u.jsx)(N,{isOpen:n,onClose:X,onUpdateUser:function(e){y.setUserInfo(e).then((function(e){I(e),a(!1)})).catch((function(e){return alert(e)}))}}),Object(u.jsx)(q,{isOpen:p,onClose:X,onUpdateCard:function(e){y.setAddPlase(e).then((function(e){F([e].concat(Object(s.a)(H))),d(!1)})).catch((function(e){return alert(e)}))}}),Object(u.jsx)(S,{isOpen:b,onClose:X,onUpdateAvatar:function(e){y.setUserAvatar(e).then((function(e){I(e),O(!1)})).catch((function(e){return alert(e)}))}}),Object(u.jsx)(k,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"popup__form-avatar",buttonText:"\u0414\u0430"}),Object(u.jsx)(A,{name:"popupImage",onClose:X,card:E,isOpen:g})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(U,{})}),document.getElementById("root")),L()}},[[17,1,2]]]);
//# sourceMappingURL=main.823012fe.chunk.js.map